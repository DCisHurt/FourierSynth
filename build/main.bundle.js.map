{"version":3,"file":"main.bundle.js","mappings":"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","sources":["webpack://introduction-to-fourier-transforms/./src/js/color.js","webpack://introduction-to-fourier-transforms/./src/js/conductor.js","webpack://introduction-to-fourier-transforms/./src/js/controller/canvas-controller.js","webpack://introduction-to-fourier-transforms/./src/js/controller/controller-util.js","webpack://introduction-to-fourier-transforms/./src/js/controller/controller.js","webpack://introduction-to-fourier-transforms/./src/js/controller/range-controller.js","webpack://introduction-to-fourier-transforms/./src/js/controller/wave-draw-controller.js","webpack://introduction-to-fourier-transforms/./src/js/controller/wave-split-controller.js","webpack://introduction-to-fourier-transforms/./src/js/fft.js","webpack://introduction-to-fourier-transforms/./src/js/just-fourier-things.js","webpack://introduction-to-fourier-transforms/./src/js/midi.js","webpack://introduction-to-fourier-transforms/./src/js/synth.js","webpack://introduction-to-fourier-transforms/./src/js/util.js","webpack://introduction-to-fourier-transforms/./src/js/wave-things.js","webpack://introduction-to-fourier-transforms/webpack/bootstrap","webpack://introduction-to-fourier-transforms/webpack/runtime/define property getters","webpack://introduction-to-fourier-transforms/webpack/runtime/hasOwnProperty shorthand","webpack://introduction-to-fourier-transforms/webpack/runtime/make namespace object","webpack://introduction-to-fourier-transforms/./src/js/main.js"],"sourcesContent":["import { clamp } from \"./util.js\";\r\n\r\nexport function rgb(r, g, b) {\r\n    return 'rgb('+r+','+g+','+b+')';\r\n}\r\n\r\nexport function grey(whiteAmt) {\r\n    whiteAmt = clamp(whiteAmt, 0, 1);\r\n    const whiteRgb = Math.floor(255 * whiteAmt);\r\n    return rgb(whiteRgb, whiteRgb, whiteRgb);\r\n}\r\n\r\nexport const palette = {\r\n    black: '#333',\r\n    blue: '#4657d7',\r\n    cyan: '#57a7cc',\r\n    pink: '#e91e63',\r\n    orange: '#ed7656',\r\n}","export default class Conductor {\r\n\r\n    constructor(controllers) {\r\n        this.lastTime = Date.now();\r\n        this.mousePosition = null;\r\n        this.controllers = controllers.slice();\r\n        this.updatingControllers = [];\r\n\r\n        // We can handle these all the same really.\r\n        document.addEventListener('mousemove', (evt) => this.updateMousePosition(evt));\r\n        document.addEventListener('mousedown', (evt) => this.updateMousePosition(evt));\r\n        document.addEventListener('mouseup',   (evt) => this.updateMousePosition(evt));\r\n\r\n        document.addEventListener('touchmove',  (evt) => this.updateTouchPosition(evt));\r\n        document.addEventListener('touchstart', (evt) => this.updateTouchPosition(evt));\r\n        document.addEventListener('touchend',   (evt) => this.updateTouchPosition(evt));\r\n\r\n        window.addEventListener('resize', (evt) => this.onResize(evt));\r\n    }\r\n\r\n    start() {\r\n        // Kick off the update loop\r\n        window.requestAnimationFrame(() => this.everyFrame());\r\n    }\r\n\r\n    onResize(evt) {\r\n        this.controllers.forEach(controller => {\r\n            if (typeof controller.onResize === 'function') {\r\n                controller.onResize();\r\n            }\r\n        })\r\n    }\r\n\r\n    everyFrame() {\r\n        this.update();\r\n        this.render();\r\n        requestAnimationFrame(() => this.everyFrame());\r\n    }\r\n\r\n    update() {\r\n        let curTime = Date.now();\r\n        let dt = (curTime - this.lastTime) / 1000;\r\n\r\n        this.updatingControllers = [];\r\n\r\n        this.controllers.forEach(controller => {\r\n            if (controller.isOnScreen()) {\r\n                controller.update(dt, this.mousePosition);\r\n                this.updatingControllers.push(controller);\r\n            }\r\n        });\r\n\r\n        this.lastTime = curTime;\r\n\r\n        const debug = document.getElementById('debug-content');\r\n        if (debug) {\r\n            debug.innerHTML = this.updatingControllers.map(c => c.id).join('<br>') + '<br>';\r\n        }\r\n    }\r\n\r\n    render() {\r\n        this.controllers.forEach(controller => {\r\n            if (controller.isOnScreen()) {\r\n                controller.render();\r\n            }\r\n        });\r\n    }\r\n\r\n    updateMousePosition(evt) {\r\n        this.mousePosition = { x: evt.clientX, y: evt.clientY };\r\n    }\r\n\r\n    updateTouchPosition(evt) {\r\n        if (evt.touches.length > 0) {\r\n            this.mousePosition = { x: evt.touches[0].clientX, y: evt.touches[0].clientY };\r\n        }\r\n    }\r\n\r\n}","import { elementInView, getScrollPosition } from \"./controller-util.js\";\r\nimport Controller from \"./controller.js\";\r\n\r\nexport default class CanvasController extends Controller {\r\n\r\n    constructor(id, width=null, height=null) {\r\n        super();\r\n        this.id = id;\r\n        this.canvas = document.getElementById(id);\r\n        if (width == null) {\r\n            width = this.canvas.width;\r\n        }\r\n        if (height == null) {\r\n            height = this.canvas.height;\r\n        }\r\n\r\n        /** @type {CanvasRenderingContext2D} */\r\n        this.context = this.canvas.getContext('2d');\r\n        this.width = width;\r\n        this.height = height;\r\n    }\r\n\r\n    isOnScreen() {\r\n        return elementInView(this.canvas);\r\n    }\r\n\r\n    getScrollPosition() {\r\n        return getScrollPosition(this.canvas)\r\n    }\r\n\r\n    clear() {\r\n        // Clear the previous frame\r\n        this.context.resetTransform();\r\n        this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n    }\r\n\r\n}\r\n","export function getScrollPosition(elem) {\r\n    const boundingRect = elem.getBoundingClientRect();\r\n    const centerY = (boundingRect.top + boundingRect.bottom) / 2;\r\n    const windowHeight = (window.innerHeight || document.documentElement.clientHeight)\r\n    return centerY / windowHeight;\r\n}\r\n\r\nexport function elementInView(elem) {\r\n    // Thanks stack overflow https://stackoverflow.com/a/7557433\r\n    const boundingRect = elem.getBoundingClientRect();\r\n\r\n    return (\r\n        boundingRect.bottom >= 0 &&\r\n        boundingRect.top <= (window.innerHeight || document.documentElement.clientHeight) &&\r\n        boundingRect.right >= 0 &&\r\n        boundingRect.left <= (window.innerWidth || document.documentElement.clientWidth)\r\n    );\r\n}","export default class Controller {\r\n\r\n    update(dt, mousePosition) {\r\n        // nothing.\r\n    }\r\n\r\n    isOnScreen() {\r\n        return true;\r\n    }\r\n\r\n    render() {\r\n        // nothing.\r\n    }\r\n\r\n}\r\n","import { easeInOut } from \"../util.js\";\r\nimport Controller from \"./controller.js\";\r\n\r\nexport default class RangeController extends Controller {\r\n\r\n    constructor(id) {\r\n        super();\r\n        this.id = id;\r\n        this.slider = document.getElementById(id);\r\n\r\n        this.onValueChange = [];\r\n\r\n        this.holdValueCount = 0;\r\n        /**\r\n         * How long to pause on the value the person set before continuing\r\n         */\r\n        this.holdValueLength = 10;\r\n        this.heldValue = 0;\r\n\r\n        this.resumeCount = 0;\r\n        /**\r\n         * Time to transition back to being controller automatically\r\n         */\r\n        this.resumeLength = 2;\r\n\r\n        this.animate = true;\r\n        this.animAmt = 0;\r\n        this.period = 10;\r\n\r\n        this.slider.oninput = () => this.holdValue();\r\n    }\r\n\r\n    update(dt, mousePosition) {\r\n        if (!this.animate) {\r\n            return;\r\n        }\r\n        if (this.holdValueCount > 0) {\r\n            this.holdValueCount -= dt;\r\n            // Just set it back to zero to be clean about it.\r\n            if (this.holdValueCount <= 0) {\r\n                this.holdValueCount = 0;\r\n            }\r\n            // we're going to return here so we don't mangle the value of the slider\r\n            return;\r\n        }\r\n        else if (this.resumeCount > 0) {\r\n            this.resumeCount -= dt;\r\n            if (this.resumeCount <= 0) {\r\n                this.resumeCount = 0;\r\n            }\r\n        }\r\n\r\n        // Goes from 0 to 1 as stuff resumes.\r\n        const resumeAmt = 1 - (this.resumeCount / this.resumeLength);\r\n        const easedResumeAmt = easeInOut(resumeAmt, 3);\r\n        // Multiply by the resume amt to slow it down\r\n        this.animAmt += easedResumeAmt * dt / this.period;\r\n        this.animAmt %= 1;\r\n\r\n        const sinePos = 0.5 * Math.cos(2 * Math.PI * this.animAmt) + 0.5;\r\n        this.slider.value = sinePos;\r\n        this.onValueChange.forEach(fn => fn(this.slider.value));\r\n    }\r\n\r\n    holdValue() {\r\n        this.holdValueCount = this.holdValueLength;\r\n        this.resumeCount = this.resumeLength;\r\n        this.heldValue = this.slider.value;\r\n        // Calculate what the anim amt should be.\r\n        this.animAmt = Math.acos(2 * this.heldValue - 1) / (2 * Math.PI);\r\n\r\n        this.onValueChange.forEach(fn => fn(this.slider.value));\r\n    }\r\n\r\n\r\n}\r\n","import CanvasController from \"./canvas-controller.js\";\r\nimport { slurp } from \"../util.js\";\r\nimport { palette } from \"../color.js\";\r\n\r\nexport default class WaveDrawController extends CanvasController {\r\n\r\n    constructor(id, width, height) {\r\n        super(id, width, height);\r\n        // just a list\r\n        this.wavePoints = new Array(128).fill(this.height / 2);\r\n\r\n        this.drawing = false;\r\n        this.onDrawingStart = [];\r\n        this.onDrawingEnd = [];\r\n        this.lastMousePoint = null;\r\n\r\n        this.canvas.addEventListener('mousedown', () => this.startDrawing());\r\n        this.canvas.addEventListener('touchstart', () => this.startDrawing());\r\n\r\n        document.addEventListener('mouseup', () => this.stopDrawing());\r\n        document.addEventListener('touchend', () => this.stopDrawing());\r\n\r\n        // Prevent scrolling while we're drawing here\r\n        this.canvas.addEventListener('touchmove', (evt) => evt.preventDefault(), {passive: false});\r\n    }\r\n\r\n    get normPath() {\r\n        return this.wavePoints.map(el => el / this.height)\r\n    }\r\n\r\n    startDrawing() {\r\n        this.drawing = true;\r\n        this.lastMousePoint = null;\r\n\r\n        this.onDrawingStart.forEach(fn => fn());\r\n    }\r\n\r\n    stopDrawing() {\r\n        if (this.drawing) {\r\n            this.drawing = false;\r\n            this.lastMousePoint = null;\r\n\r\n            this.onDrawingEnd.forEach(fn => fn());\r\n        }\r\n    }\r\n\r\n     update(dt, mousePosition) {\r\n        if (!mousePosition || !this.drawing) {\r\n            return;\r\n        }\r\n\r\n        const canvasPosition = this.canvas.getBoundingClientRect();\r\n        // we have to account for the border here too\r\n        const actualWidth = (canvasPosition.right - canvasPosition.left) - 2;\r\n        // 500 being the 'default' width\r\n        const scale = 500 / actualWidth;\r\n        const mousePoint = {\r\n            x: scale * (mousePosition.x - canvasPosition.x),\r\n            y: scale * (mousePosition.y - canvasPosition.y),\r\n        }\r\n        if (this.lastMousePoint == null) {\r\n            this.lastMousePoint = mousePoint;\r\n        }\r\n\r\n        const xDiff = Math.abs(mousePoint.x - this.lastMousePoint.x);\r\n        const pointsGap = this.width / this.wavePoints.length;\r\n        const lerpPoints = 2 * Math.ceil(xDiff / pointsGap) + 1;\r\n        for (let i = 0; i < lerpPoints; i ++) {\r\n            const amt = (i - 1) / lerpPoints;\r\n\r\n            const index = this.getNearestIndex(slurp(this.lastMousePoint.x, mousePoint.x, amt));\r\n            this.wavePoints[index] = slurp(this.lastMousePoint.y, mousePoint.y, amt);\r\n        }\r\n\r\n        this.lastMousePoint = mousePoint;\r\n    }\r\n\r\n    /**\r\n     * Gets the nearest index in the wave array to the x coord on the screen\r\n     * @param {Number} x\r\n     */\r\n    getNearestIndex(x) {\r\n        const xAmt = (x / this.width)\r\n        let pos = Math.round(this.wavePoints.length * xAmt) % this.wavePoints.length;\r\n        if (pos < 0) {\r\n            pos += this.wavePoints.length;\r\n        }\r\n        return pos;\r\n    }\r\n\r\n    render() {\r\n        this.clear();\r\n\r\n        this.renderWave();\r\n    }\r\n\r\n    renderWave() {\r\n        this.context.beginPath();\r\n        this.context.lineWidth = 2;\r\n        this.context.strokeStyle = palette.pink;\r\n        for (let i = 0; i <= this.wavePoints.length; i ++) {\r\n            const index = i % this.wavePoints.length;\r\n            const amt = i / this.wavePoints.length;\r\n\r\n            const x = this.width * amt;\r\n            const y = this.wavePoints[index];\r\n\r\n            if (i == 0) {\r\n                this.context.moveTo(x, y);\r\n            }\r\n            else {\r\n                this.context.lineTo(x, y);\r\n            }\r\n        }\r\n        this.context.stroke();\r\n    }\r\n}\r\n","import CanvasController from \"./canvas-controller.js\";\r\nimport { slurp } from \"../util.js\";\r\nimport { getRealFourierData } from \"../just-fourier-things.js\";\r\nimport { palette } from \"../color.js\";\r\nimport { renderWave } from \"../wave-things.js\";\r\n\r\nconst transitionFactor = (1 / 15);\r\n\r\nexport default class WaveSplitController extends CanvasController {\r\n\r\n    constructor(id, width, height) {\r\n        super(id, width, height);\r\n\r\n        this.animAmt = 0;\r\n        this.wavePoints = [];\r\n        this.partialWave = [];\r\n        this.fourierPoints = [];\r\n\r\n        this.onFourierChange = []\r\n\r\n        this.waveTop = 0;\r\n        this.waveBottom = 0;\r\n        this.totalHeight = 0;\r\n        this.fadeFrequencies = true;\r\n        this.splitAnim = true;\r\n        // How many of the waves to draw\r\n        this.fourierAmt = 1;\r\n    }\r\n\r\n    setPath(path) {\r\n        // Update the wave points. For the sake of removing the constant term in the FFT,\r\n        // Set the mean to be 0.\r\n        const pathAverage = path.reduce((a, b) => a + b, 0) / path.length;\r\n        this.wavePoints = path.map(p => p - pathAverage);\r\n        // Calculate fourier points, and drop the small things.\r\n        this.fourierData = getRealFourierData(this.wavePoints).filter(f => f.amplitude > 0.001);\r\n        this.fourierData.sort((a, b) => b.amplitude - a.amplitude);\r\n\r\n        // Calculate the heights of the main wave and all the sine things\r\n        this.waveTop = Math.min(...this.wavePoints);\r\n        this.waveBottom = Math.max(...this.wavePoints);\r\n\r\n        // Total height. Start with the main wave...\r\n        this.totalHeight = this.waveBottom - this.waveTop;\r\n        // Then add all the sine thingos\r\n        this.fourierData.forEach((el) => this.totalHeight += 2 * el.amplitude);\r\n\r\n        // reset the animation too\r\n        this.animAmt = 0;\r\n        this.splitAmt = 0;\r\n\r\n        this.onFourierChange.forEach(fn => fn());\r\n    }\r\n\r\n    update(dt, mousePosition) {\r\n        const period = 7;\r\n        this.animAmt += dt / period;\r\n        this.animAmt %= 1;\r\n\r\n        const pos = this.getScrollPosition();\r\n        let desiredSplitAmt = 0;\r\n        if (pos < 0.7) {\r\n            desiredSplitAmt = 1;\r\n        }\r\n        this.splitAmt += transitionFactor * (desiredSplitAmt - this.splitAmt);\r\n    }\r\n\r\n    render() {\r\n        this.clear();\r\n        this.renderWaves();\r\n    }\r\n\r\n    renderWaves() {\r\n        if (this.wavePoints.length == 0) {\r\n            return;\r\n        }\r\n        this.context.strokeStyle = palette.cyan;\r\n        this.context.lineWidth = 2;\r\n\r\n        const numBabies = Math.min(50, this.fourierData.length);\r\n        const top = 0.1 * this.context.canvas.height;\r\n        const bottom = 0.9 * this.context.canvas.height;\r\n        // TODO: also incorporate into the frequencies to scale that too?\r\n        const sizeMultiple = (bottom - top) / this.totalHeight;\r\n        const spacingMultiplier = 0.8;\r\n\r\n        // Running thing that says where to draw each wave.\r\n        let curWavePos = 0;\r\n\r\n        let startXAmt = -this.animAmt;\r\n\r\n        let splitAmt = 1;\r\n        let fadeAmt = 1;\r\n        if (this.splitAnim) {\r\n            splitAmt = this.splitAmt;\r\n            fadeAmt = splitAmt;\r\n        }\r\n\r\n        // Actually, we're going to skip drawing the main wave here and draw it later.\r\n        curWavePos += this.waveBottom - this.waveTop;\r\n\r\n        // Draw its little babies.\r\n        // Also sum up their values to draw the partial wave.\r\n\r\n        this.partialWave = this.wavePoints.slice().fill(0);\r\n        const renderedBabies = Math.round(slurp(1, numBabies, this.fourierAmt));\r\n        for (let babe = 0; babe < renderedBabies; babe ++) {\r\n            let babeAmt = babe / (numBabies - 1);\r\n            const waveData = this.fourierData[babe];\r\n            curWavePos += waveData.amplitude;\r\n            const wavePosition = slurp(-this.waveTop, curWavePos, splitAmt);\r\n\r\n            // lets generate this wave hey\r\n            // TODO: cache this?\r\n            const wave = this.wavePoints.slice();\r\n            for (let i = 0; i < this.wavePoints.length; i ++) {\r\n                const iAmt = i / this.wavePoints.length;\r\n                const fullWaveAmt = this.wavePoints[i];\r\n                const sineAmt = waveData.amplitude * Math.cos(2 * Math.PI * waveData.freq * iAmt + waveData.phase);\r\n                wave[i] = slurp(fullWaveAmt, sineAmt, splitAmt);\r\n\r\n                // While we're here, update the partial wave\r\n                this.partialWave[i] += wave[i];\r\n            }\r\n\r\n            this.context.beginPath();\r\n            this.context.globalAlpha = fadeAmt;\r\n            if (this.fadeFrequencies) {\r\n                this.context.globalAlpha *= (1 - babeAmt);\r\n            }\r\n            renderWave({\r\n                context: this.context,\r\n                width: this.width,\r\n                wave: wave,\r\n                yPosition: top + sizeMultiple * wavePosition,\r\n                yMultiple: sizeMultiple * spacingMultiplier,\r\n                startXAmt: startXAmt\r\n            });\r\n            this.context.stroke();\r\n            this.context.globalAlpha = 1;\r\n\r\n            curWavePos += waveData.amplitude;\r\n        }\r\n\r\n        curWavePos = 0;\r\n        curWavePos -= this.waveTop;\r\n        if (this.fourierAmt == 1) {\r\n            // Eh just make it the full wave.\r\n            this.partialWave = this.wavePoints;\r\n        }\r\n\r\n        // Now, lets go back and draw the main wave\r\n        // Draw the main boy\r\n        this.context.strokeStyle = palette.blue;\r\n        this.context.lineWidth = 2;\r\n        this.context.beginPath();\r\n        renderWave({\r\n            context: this.context,\r\n            width: this.width,\r\n            wave: this.partialWave,\r\n            yPosition: top + sizeMultiple * curWavePos,\r\n            yMultiple: sizeMultiple * spacingMultiplier,\r\n            startXAmt: startXAmt\r\n        });\r\n        this.context.stroke();\r\n    }\r\n\r\n}","\r\nexport default class Conductor {\r\n  constructor(size) {\r\n    this.size = size | 0;\r\n    if (this.size <= 1 || (this.size & (this.size - 1)) !== 0)\r\n      throw new Error('FFT size must be a power of two and bigger than 1');\r\n\r\n    this._csize = size << 1;\r\n\r\n    // NOTE: Use of `var` is intentional for old V8 versions\r\n    var table = new Array(this.size * 2);\r\n    for (var i = 0; i < table.length; i += 2) {\r\n      const angle = Math.PI * i / this.size;\r\n      table[i] = Math.cos(angle);\r\n      table[i + 1] = -Math.sin(angle);\r\n    }\r\n    this.table = table;\r\n\r\n    // Find size's power of two\r\n    var power = 0;\r\n    for (var t = 1; this.size > t; t <<= 1)\r\n      power++;\r\n\r\n    // Calculate initial step's width:\r\n    //   * If we are full radix-4 - it is 2x smaller to give inital len=8\r\n    //   * Otherwise it is the same as `power` to give len=4\r\n    this._width = power % 2 === 0 ? power - 1 : power;\r\n\r\n    // Pre-compute bit-reversal patterns\r\n    this._bitrev = new Array(1 << this._width);\r\n    for (var j = 0; j < this._bitrev.length; j++) {\r\n      this._bitrev[j] = 0;\r\n      for (var shift = 0; shift < this._width; shift += 2) {\r\n        var revShift = this._width - shift - 2;\r\n        this._bitrev[j] |= ((j >>> shift) & 3) << revShift;\r\n      }\r\n    }\r\n\r\n    this._out = null;\r\n    this._data = null;\r\n    this._inv = 0;\r\n  }\r\n  // module.exports = FFT;\r\n\r\n  fromComplexArray(complex, storage) {\r\n    var res = storage || new Array(complex.length >>> 1);\r\n    for (var i = 0; i < complex.length; i += 2)\r\n      res[i >>> 1] = complex[i];\r\n    return res;\r\n  };\r\n\r\n  createComplexArray() {\r\n    const res = new Array(this._csize);\r\n    for (var i = 0; i < res.length; i++)\r\n      res[i] = 0;\r\n    return res;\r\n  };\r\n\r\n  toComplexArray(input, storage) {\r\n    var res = storage || this.createComplexArray();\r\n    for (var i = 0; i < res.length; i += 2) {\r\n      res[i] = input[i >>> 1];\r\n      res[i + 1] = 0;\r\n    }\r\n    return res;\r\n  };\r\n\r\n  completeSpectrum(spectrum) {\r\n    var size = this._csize;\r\n    var half = size >>> 1;\r\n    for (var i = 2; i < half; i += 2) {\r\n      spectrum[size - i] = spectrum[i];\r\n      spectrum[size - i + 1] = -spectrum[i + 1];\r\n    }\r\n  };\r\n\r\n  transform(out, data) {\r\n    if (out === data)\r\n      throw new Error('Input and output buffers must be different');\r\n\r\n    this._out = out;\r\n    this._data = data;\r\n    this._inv = 0;\r\n    this._transform4();\r\n    this._out = null;\r\n    this._data = null;\r\n  };\r\n\r\n  realTransform(out, data) {\r\n    if (out === data)\r\n      throw new Error('Input and output buffers must be different');\r\n\r\n    this._out = out;\r\n    this._data = data;\r\n    this._inv = 0;\r\n    this._realTransform4();\r\n    this._out = null;\r\n    this._data = null;\r\n  };\r\n\r\n  inverseTransform(out, data) {\r\n    if (out === data)\r\n      throw new Error('Input and output buffers must be different');\r\n\r\n    this._out = out;\r\n    this._data = data;\r\n    this._inv = 1;\r\n    this._transform4();\r\n    for (var i = 0; i < out.length; i++)\r\n      out[i] /= this.size;\r\n    this._out = null;\r\n    this._data = null;\r\n  };\r\n\r\n  // radix-4 implementation\r\n  //\r\n  // NOTE: Uses of `var` are intentional for older V8 version that do not\r\n  // support both `let compound assignments` and `const phi`\r\n  _transform4() {\r\n    var out = this._out;\r\n    var size = this._csize;\r\n\r\n    // Initial step (permute and transform)\r\n    var width = this._width;\r\n    var step = 1 << width;\r\n    var len = (size / step) << 1;\r\n\r\n    var outOff;\r\n    var t;\r\n    var bitrev = this._bitrev;\r\n    if (len === 4) {\r\n      for (outOff = 0, t = 0; outOff < size; outOff += len, t++) {\r\n        const off = bitrev[t];\r\n        this._singleTransform2(outOff, off, step);\r\n      }\r\n    } else {\r\n      // len === 8\r\n      for (outOff = 0, t = 0; outOff < size; outOff += len, t++) {\r\n        const off = bitrev[t];\r\n        this._singleTransform4(outOff, off, step);\r\n      }\r\n    }\r\n\r\n    // Loop through steps in decreasing order\r\n    var inv = this._inv ? -1 : 1;\r\n    var table = this.table;\r\n    for (step >>= 2; step >= 2; step >>= 2) {\r\n      len = (size / step) << 1;\r\n      var quarterLen = len >>> 2;\r\n\r\n      // Loop through offsets in the data\r\n      for (outOff = 0; outOff < size; outOff += len) {\r\n        // Full case\r\n        var limit = outOff + quarterLen;\r\n        for (var i = outOff, k = 0; i < limit; i += 2, k += step) {\r\n          const A = i;\r\n          const B = A + quarterLen;\r\n          const C = B + quarterLen;\r\n          const D = C + quarterLen;\r\n\r\n          // Original values\r\n          const Ar = out[A];\r\n          const Ai = out[A + 1];\r\n          const Br = out[B];\r\n          const Bi = out[B + 1];\r\n          const Cr = out[C];\r\n          const Ci = out[C + 1];\r\n          const Dr = out[D];\r\n          const Di = out[D + 1];\r\n\r\n          // Middle values\r\n          const MAr = Ar;\r\n          const MAi = Ai;\r\n\r\n          const tableBr = table[k];\r\n          const tableBi = inv * table[k + 1];\r\n          const MBr = Br * tableBr - Bi * tableBi;\r\n          const MBi = Br * tableBi + Bi * tableBr;\r\n\r\n          const tableCr = table[2 * k];\r\n          const tableCi = inv * table[2 * k + 1];\r\n          const MCr = Cr * tableCr - Ci * tableCi;\r\n          const MCi = Cr * tableCi + Ci * tableCr;\r\n\r\n          const tableDr = table[3 * k];\r\n          const tableDi = inv * table[3 * k + 1];\r\n          const MDr = Dr * tableDr - Di * tableDi;\r\n          const MDi = Dr * tableDi + Di * tableDr;\r\n\r\n          // Pre-Final values\r\n          const T0r = MAr + MCr;\r\n          const T0i = MAi + MCi;\r\n          const T1r = MAr - MCr;\r\n          const T1i = MAi - MCi;\r\n          const T2r = MBr + MDr;\r\n          const T2i = MBi + MDi;\r\n          const T3r = inv * (MBr - MDr);\r\n          const T3i = inv * (MBi - MDi);\r\n\r\n          // Final values\r\n          const FAr = T0r + T2r;\r\n          const FAi = T0i + T2i;\r\n\r\n          const FCr = T0r - T2r;\r\n          const FCi = T0i - T2i;\r\n\r\n          const FBr = T1r + T3i;\r\n          const FBi = T1i - T3r;\r\n\r\n          const FDr = T1r - T3i;\r\n          const FDi = T1i + T3r;\r\n\r\n          out[A] = FAr;\r\n          out[A + 1] = FAi;\r\n          out[B] = FBr;\r\n          out[B + 1] = FBi;\r\n          out[C] = FCr;\r\n          out[C + 1] = FCi;\r\n          out[D] = FDr;\r\n          out[D + 1] = FDi;\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  // radix-2 implementation\r\n  //\r\n  // NOTE: Only called for len=4\r\n  _singleTransform2(outOff, off,\r\n                                                                step) {\r\n    const out = this._out;\r\n    const data = this._data;\r\n\r\n    const evenR = data[off];\r\n    const evenI = data[off + 1];\r\n    const oddR = data[off + step];\r\n    const oddI = data[off + step + 1];\r\n\r\n    const leftR = evenR + oddR;\r\n    const leftI = evenI + oddI;\r\n    const rightR = evenR - oddR;\r\n    const rightI = evenI - oddI;\r\n\r\n    out[outOff] = leftR;\r\n    out[outOff + 1] = leftI;\r\n    out[outOff + 2] = rightR;\r\n    out[outOff + 3] = rightI;\r\n  };\r\n\r\n  // radix-4\r\n  //\r\n  // NOTE: Only called for len=8\r\n  _singleTransform4(outOff, off, step) {\r\n    const out = this._out;\r\n    const data = this._data;\r\n    const inv = this._inv ? -1 : 1;\r\n    const step2 = step * 2;\r\n    const step3 = step * 3;\r\n\r\n    // Original values\r\n    const Ar = data[off];\r\n    const Ai = data[off + 1];\r\n    const Br = data[off + step];\r\n    const Bi = data[off + step + 1];\r\n    const Cr = data[off + step2];\r\n    const Ci = data[off + step2 + 1];\r\n    const Dr = data[off + step3];\r\n    const Di = data[off + step3 + 1];\r\n\r\n    // Pre-Final values\r\n    const T0r = Ar + Cr;\r\n    const T0i = Ai + Ci;\r\n    const T1r = Ar - Cr;\r\n    const T1i = Ai - Ci;\r\n    const T2r = Br + Dr;\r\n    const T2i = Bi + Di;\r\n    const T3r = inv * (Br - Dr);\r\n    const T3i = inv * (Bi - Di);\r\n\r\n    // Final values\r\n    const FAr = T0r + T2r;\r\n    const FAi = T0i + T2i;\r\n\r\n    const FBr = T1r + T3i;\r\n    const FBi = T1i - T3r;\r\n\r\n    const FCr = T0r - T2r;\r\n    const FCi = T0i - T2i;\r\n\r\n    const FDr = T1r - T3i;\r\n    const FDi = T1i + T3r;\r\n\r\n    out[outOff] = FAr;\r\n    out[outOff + 1] = FAi;\r\n    out[outOff + 2] = FBr;\r\n    out[outOff + 3] = FBi;\r\n    out[outOff + 4] = FCr;\r\n    out[outOff + 5] = FCi;\r\n    out[outOff + 6] = FDr;\r\n    out[outOff + 7] = FDi;\r\n  };\r\n\r\n  // Real input radix-4 implementation\r\n  _realTransform4() {\r\n    var out = this._out;\r\n    var size = this._csize;\r\n\r\n    // Initial step (permute and transform)\r\n    var width = this._width;\r\n    var step = 1 << width;\r\n    var len = (size / step) << 1;\r\n\r\n    var outOff;\r\n    var t;\r\n    var bitrev = this._bitrev;\r\n    if (len === 4) {\r\n      for (outOff = 0, t = 0; outOff < size; outOff += len, t++) {\r\n        const off = bitrev[t];\r\n        this._singleRealTransform2(outOff, off >>> 1, step >>> 1);\r\n      }\r\n    } else {\r\n      // len === 8\r\n      for (outOff = 0, t = 0; outOff < size; outOff += len, t++) {\r\n        const off = bitrev[t];\r\n        this._singleRealTransform4(outOff, off >>> 1, step >>> 1);\r\n      }\r\n    }\r\n\r\n    // Loop through steps in decreasing order\r\n    var inv = this._inv ? -1 : 1;\r\n    var table = this.table;\r\n    for (step >>= 2; step >= 2; step >>= 2) {\r\n      len = (size / step) << 1;\r\n      var halfLen = len >>> 1;\r\n      var quarterLen = halfLen >>> 1;\r\n      var hquarterLen = quarterLen >>> 1;\r\n\r\n      // Loop through offsets in the data\r\n      for (outOff = 0; outOff < size; outOff += len) {\r\n        for (var i = 0, k = 0; i <= hquarterLen; i += 2, k += step) {\r\n          var A = outOff + i;\r\n          var B = A + quarterLen;\r\n          var C = B + quarterLen;\r\n          var D = C + quarterLen;\r\n\r\n          // Original values\r\n          var Ar = out[A];\r\n          var Ai = out[A + 1];\r\n          var Br = out[B];\r\n          var Bi = out[B + 1];\r\n          var Cr = out[C];\r\n          var Ci = out[C + 1];\r\n          var Dr = out[D];\r\n          var Di = out[D + 1];\r\n\r\n          // Middle values\r\n          var MAr = Ar;\r\n          var MAi = Ai;\r\n\r\n          var tableBr = table[k];\r\n          var tableBi = inv * table[k + 1];\r\n          var MBr = Br * tableBr - Bi * tableBi;\r\n          var MBi = Br * tableBi + Bi * tableBr;\r\n\r\n          var tableCr = table[2 * k];\r\n          var tableCi = inv * table[2 * k + 1];\r\n          var MCr = Cr * tableCr - Ci * tableCi;\r\n          var MCi = Cr * tableCi + Ci * tableCr;\r\n\r\n          var tableDr = table[3 * k];\r\n          var tableDi = inv * table[3 * k + 1];\r\n          var MDr = Dr * tableDr - Di * tableDi;\r\n          var MDi = Dr * tableDi + Di * tableDr;\r\n\r\n          // Pre-Final values\r\n          var T0r = MAr + MCr;\r\n          var T0i = MAi + MCi;\r\n          var T1r = MAr - MCr;\r\n          var T1i = MAi - MCi;\r\n          var T2r = MBr + MDr;\r\n          var T2i = MBi + MDi;\r\n          var T3r = inv * (MBr - MDr);\r\n          var T3i = inv * (MBi - MDi);\r\n\r\n          // Final values\r\n          var FAr = T0r + T2r;\r\n          var FAi = T0i + T2i;\r\n\r\n          var FBr = T1r + T3i;\r\n          var FBi = T1i - T3r;\r\n\r\n          out[A] = FAr;\r\n          out[A + 1] = FAi;\r\n          out[B] = FBr;\r\n          out[B + 1] = FBi;\r\n\r\n          // Output final middle point\r\n          if (i === 0) {\r\n            var FCr = T0r - T2r;\r\n            var FCi = T0i - T2i;\r\n            out[C] = FCr;\r\n            out[C + 1] = FCi;\r\n            continue;\r\n          }\r\n\r\n          // Do not overwrite ourselves\r\n          if (i === hquarterLen)\r\n            continue;\r\n\r\n          // In the flipped case:\r\n          // MAi = -MAi\r\n          // MBr=-MBi, MBi=-MBr\r\n          // MCr=-MCr\r\n          // MDr=MDi, MDi=MDr\r\n          var ST0r = T1r;\r\n          var ST0i = -T1i;\r\n          var ST1r = T0r;\r\n          var ST1i = -T0i;\r\n          var ST2r = -inv * T3i;\r\n          var ST2i = -inv * T3r;\r\n          var ST3r = -inv * T2i;\r\n          var ST3i = -inv * T2r;\r\n\r\n          var SFAr = ST0r + ST2r;\r\n          var SFAi = ST0i + ST2i;\r\n\r\n          var SFBr = ST1r + ST3i;\r\n          var SFBi = ST1i - ST3r;\r\n\r\n          var SA = outOff + quarterLen - i;\r\n          var SB = outOff + halfLen - i;\r\n\r\n          out[SA] = SFAr;\r\n          out[SA + 1] = SFAi;\r\n          out[SB] = SFBr;\r\n          out[SB + 1] = SFBi;\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  // radix-2 implementation\r\n  //\r\n  // NOTE: Only called for len=4\r\n  _singleRealTransform2(outOff,\r\n                                                                        off,\r\n                                                                        step) {\r\n    const out = this._out;\r\n    const data = this._data;\r\n\r\n    const evenR = data[off];\r\n    const oddR = data[off + step];\r\n\r\n    const leftR = evenR + oddR;\r\n    const rightR = evenR - oddR;\r\n\r\n    out[outOff] = leftR;\r\n    out[outOff + 1] = 0;\r\n    out[outOff + 2] = rightR;\r\n    out[outOff + 3] = 0;\r\n  };\r\n\r\n  // radix-4\r\n  //\r\n  // NOTE: Only called for len=8\r\n  _singleRealTransform4(outOff,\r\n                                                                        off,\r\n                                                                        step) {\r\n    const out = this._out;\r\n    const data = this._data;\r\n    const inv = this._inv ? -1 : 1;\r\n    const step2 = step * 2;\r\n    const step3 = step * 3;\r\n\r\n    // Original values\r\n    const Ar = data[off];\r\n    const Br = data[off + step];\r\n    const Cr = data[off + step2];\r\n    const Dr = data[off + step3];\r\n\r\n    // Pre-Final values\r\n    const T0r = Ar + Cr;\r\n    const T1r = Ar - Cr;\r\n    const T2r = Br + Dr;\r\n    const T3r = inv * (Br - Dr);\r\n\r\n    // Final values\r\n    const FAr = T0r + T2r;\r\n\r\n    const FBr = T1r;\r\n    const FBi = -T3r;\r\n\r\n    const FCr = T0r - T2r;\r\n\r\n    const FDr = T1r;\r\n    const FDi = T3r;\r\n\r\n    out[outOff] = FAr;\r\n    out[outOff + 1] = 0;\r\n    out[outOff + 2] = FBr;\r\n    out[outOff + 3] = FBi;\r\n    out[outOff + 4] = FCr;\r\n    out[outOff + 5] = 0;\r\n    out[outOff + 6] = FDr;\r\n    out[outOff + 7] = FDi;\r\n  };\r\n}","import FFT from './fft.js';\r\nimport { slurp } from \"./util.js\";\r\n\r\n/**\r\n * Do the fourier thing using a bunch of complex points\r\n *\r\n * @param {Array<Number>} points Array of points, alternative with re, im pairs. Length must be a power of 2\r\n */\r\nexport function getFourierData(points) {\r\n    if (points.length == 0) {\r\n        return [];\r\n    }\r\n    const numPoints = points.length / 2;\r\n    const fft = new FFT(numPoints);\r\n\r\n    const out = fft.createComplexArray();\r\n    fft.transform(out, points);\r\n\r\n    // Transform into an API of points I find friendlier.\r\n    const fftData = [];\r\n    for (let i = 0; i < numPoints; i ++) {\r\n        // to reorder the frequencies a little nicer, we pick from the front and back altermatively\r\n        const j = i % 2 == 0 ? i / 2 : numPoints - ((i+1) / 2);\r\n        const x = out[2 * j];\r\n        const y = out[2 * j + 1];\r\n        const freq = ((j + numPoints / 2) % numPoints) - numPoints / 2;\r\n        fftData.push({\r\n            freq: freq,\r\n            // a little expensive\r\n            amplitude: Math.sqrt(x * x + y * y) / numPoints,\r\n            // a lottle expensive :(\r\n            phase: Math.atan2(y, x),\r\n        });\r\n    }\r\n    // fftData.sort((a, b) => b.amplitude - a.amplitude);\r\n    return fftData;\r\n}\r\n\r\n/**\r\n *\r\n * @param {Array<Number>} points Array of values of some wave. Must be a power of 2.\r\n */\r\nexport function getRealFourierData(points) {\r\n    if (points.length == 0) {\r\n        return [];\r\n    }\r\n    const numPoints = points.length;\r\n    const fft = new FFT(numPoints);\r\n\r\n    const formatedPoints = fft.createComplexArray();\r\n    fft.toComplexArray(points, formatedPoints);\r\n\r\n    const out = fft.createComplexArray();\r\n    fft.transform(out, formatedPoints);\r\n\r\n    // Transform into an API of points I find friendlier.\r\n    const fftData = [];\r\n    // We only have to read the first half of this because of symmetry things.\r\n    for (let i = 0; i < numPoints / 2; i ++) {\r\n        const x = out[2 * i];\r\n        const y = out[2 * i + 1];\r\n        const freq = i;\r\n        fftData.push({\r\n            freq: freq,\r\n            // a little expensive\r\n            // Also we gotta multiply this by 2 to account for the other side that\r\n            amplitude: 2 * Math.sqrt(x * x + y * y) / numPoints,\r\n            // a lottle expensive :(\r\n            phase: Math.atan2(y, x),\r\n        });\r\n    }\r\n    // fftData.sort((a, b) => b.amplitude - a.amplitude);\r\n    return fftData;\r\n}\r\n\r\n/**\r\n * Transforms a list of x, y points into input appropriate for a fourier transform.\r\n */\r\nexport function resample2dData(points, numSamples) {\r\n    if (points.length == 0) {\r\n        // Can't resample if we don't have ANY points\r\n        return [];\r\n    }\r\n    let newPoints = [];\r\n    for (let i = 0; i < numSamples; i ++) {\r\n        let position = points.length * (i / numSamples);\r\n        let index = Math.floor(position);\r\n        let nextIndex = (index + 1) % points.length;\r\n        let amt = position - index;\r\n        newPoints.push(\r\n            /* x */ slurp(points[index].x, points[nextIndex].x, amt),\r\n            /* y */ slurp(points[index].y, points[nextIndex].y, amt),\r\n        )\r\n    }\r\n    return newPoints;\r\n}\r\n\r\n/**\r\n * Do the fourier thing using a bunch of complex points\r\n *\r\n * @param {Array<Number>} points Array of points, alternative with re, im pairs. Length must be a power of 2\r\n */\r\nexport function getFourierRI(points) {\r\n    if (points.length == 0) {\r\n        return [];\r\n    }\r\n    const numPoints = points.length / 2;\r\n    const fft = new FFT(numPoints);\r\n\r\n    const out = fft.createComplexArray();\r\n    fft.toComplexArray(points,out);\r\n\r\n\r\n    console.log(out)\r\n    // Transform into an API of points I find friendlier.\r\n    // const fftData = [];\r\n    // for (let i = 0; i < numPoints; i ++) {\r\n    //     // to reorder the frequencies a little nicer, we pick from the front and back altermatively\r\n    //     const j = i % 2 == 0 ? i / 2 : numPoints - ((i+1) / 2);\r\n    //     const x = out[2 * j];\r\n    //     const y = out[2 * j + 1];\r\n    //     const freq = ((j + numPoints / 2) % numPoints) - numPoints / 2;\r\n    //     fftData.push({\r\n    //         freq: freq,\r\n    //         // a little expensive\r\n    //         amplitude: Math.sqrt(x * x + y * y) / numPoints,\r\n    //         // a lottle expensive :(\r\n    //         phase: Math.atan2(y, x),\r\n    //     });\r\n    // }\r\n    // // fftData.sort((a, b) => b.amplitude - a.amplitude);\r\n    return out;\r\n}","import { playSoundWave, stopSoundWave, pitchShift, volumeShift } from './synth.js';\r\n\r\nexport let nPiontsCC = [];\r\nexport let cutoffCC = [];\r\nexport let resonanceCC = [];\r\nexport let delayTimeCC = [];\r\nexport let delayWetCC = [];\r\nexport let attackCC = [];\r\nexport let decayCC = [];\r\nexport let driveCC = [];\r\nexport let masterVolCC = [];\r\n\r\nexport function connectMidi() {\r\n\r\n    navigator.requestMIDIAccess()\r\n    .then(\r\n        (midi) => midiReady(midi),\r\n        (err) => console.log('Something went wrong', err));\r\n}\r\n  \r\nfunction midiReady(midi) {\r\n    // Also react to device changes.\r\n    midi.addEventListener('statechange', (event) => initDevices(event.target));\r\n    initDevices(midi); // see the next section!\r\n}\r\n\r\n\r\nfunction initDevices(midi) {\r\n    // Reset.\r\n    let midiIn = [];\r\n    let midiOut = [];\r\n\r\n    // MIDI devices that send you data.\r\n    const inputs = midi.inputs.values();\r\n    for (let input = inputs.next(); input && !input.done; input = inputs.next()) {\r\n        midiIn.push(input.value);\r\n    }\r\n\r\n    // MIDI devices that you send data to.\r\n    const outputs = midi.outputs.values();\r\n    for (let output = outputs.next(); output && !output.done; output = outputs.next()) {\r\n        midiOut.push(output.value);\r\n    }\r\n    for (const input of midiIn) {\r\n        input.addEventListener('midimessage', midiMessageReceived);\r\n    }\r\n}\r\n\r\n\r\nfunction midiMessageReceived(event) {\r\n    // MIDI commands we care about. See\r\n    // http://webaudio.github.io/web-midi-api/#a-simple-monophonic-sine-wave-midi-synthesizer.\r\n    const NOTE_ON = 9;\r\n    const NOTE_OFF = 8;\r\n    const PITCH_BEND = 0xE;\r\n    const AFTER_TOUCH = 0xD;\r\n    const CONTROL_CHANGE = 0xB;\r\n    const velocity = (event.data.length > 2) ? event.data[2] : 1;\r\n    const cmd = event.data[0] >> 4;\r\n    const channel = event.data[0] & 0x0F;\r\n    const value = event.data[1];\r\n    \r\n    // Note that not all MIDI controllers send a separate NOTE_OFF command for every NOTE_ON.\r\n    if (cmd === NOTE_OFF || (cmd === NOTE_ON && velocity === 0)) {\r\n        console.log(`🎧 from ${event.srcElement.name}, channel: ${channel}, note off: pitch:${value}`);\r\n        stopSoundWave(channel);\r\n    } \r\n    else if (cmd === NOTE_ON) {\r\n        console.log(`🎧 from ${event.srcElement.name}, channel: ${channel}, note on: pitch:${value}, velocity: ${velocity}`);\r\n        playSoundWave(channel,note2Frequency(value));\r\n    }\r\n    else if (cmd === PITCH_BEND) {\r\n        const bend = ((event.data[2] << 7) + event.data[1] - 8192) / 8192;\r\n        // console.log(`🎧 from ${event.srcElement.name}, channel: ${channel}, pitch shift ${(bend * 12).toFixed(1)} semitones`);\r\n        pitchShift(channel, bend);\r\n    }\r\n    else if (cmd === AFTER_TOUCH) {\r\n        // console.log(`🎧 from ${event.srcElement.name}, channel: ${channel}, volume:${value}`);\r\n        volumeShift(channel, value);\r\n    }\r\n    else if (cmd === CONTROL_CHANGE) {\r\n\r\n        switch (value) {\r\n            case 2:\r\n                console.log(`🎧 from ${event.srcElement.name}, channel: ${channel}, nFFT:${velocity}`);\r\n                nPiontsCC.forEach(fn => fn(velocity / 127));\r\n                break;\r\n            case 3:\r\n                console.log(`🎧 from ${event.srcElement.name}, channel: ${channel}, Filter CutOff:${velocity}`);\r\n                let freq = Math.round(Math.pow(10, (velocity / 127) *3) * 24);\r\n                cutoffCC.forEach(fn => fn(freq));\r\n                break;\r\n            case 4:\r\n                console.log(`🎧 from ${event.srcElement.name}, channel: ${channel}, Filter Resonance:${velocity}`);\r\n                resonanceCC.forEach(fn => fn((velocity * 20 / 127) + 1));\r\n                break;\r\n            case 5:\r\n                console.log(`🎧 from ${event.srcElement.name}, channel: ${channel}, Delay Time:${velocity}`);\r\n                delayTimeCC.forEach(fn => fn(velocity / 127));\r\n                break;\r\n            case 6:\r\n                console.log(`🎧 from ${event.srcElement.name}, channel: ${channel}, Delay Wet:${velocity}`);\r\n                delayWetCC.forEach(fn => fn(velocity / 127));\r\n                break;\r\n            case 7:\r\n                console.log(`🎧 from ${event.srcElement.name}, channel: ${channel}, Attack Time:${velocity}`);\r\n                attackCC.forEach(fn => fn(velocity * 2 / 127));\r\n                break;\r\n            case 8:\r\n                console.log(`🎧 from ${event.srcElement.name}, channel: ${channel}, Decay Time:${velocity}`);\r\n                decayCC.forEach(fn => fn(velocity * 2 / 127));\r\n                break;\r\n            case 9:\r\n                console.log(`🎧 from ${event.srcElement.name}, channel: ${channel}, Drive:${velocity}`);\r\n                driveCC.forEach(fn => fn(velocity * 500 / 127));\r\n                break;\r\n            case 10:\r\n                console.log(`🎧 from ${event.srcElement.name}, channel: ${channel}, Master Volume:${velocity}`);\r\n                masterVolCC.forEach(fn => fn(velocity / 127));\r\n                break;\r\n            case 11:\r\n                console.log(`CC + 1`);\r\n                break;\r\n            case 12:\r\n                console.log(`CC - 1`);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n}\r\n\r\n\r\nfunction note2Frequency(note) {\r\n    return 440 * Math.pow(2,(note-69)/12);\r\n}\r\n","import { normaliseWave, getWaveFunction } from \"./wave-things.js\";\r\nimport FFT from './fft.js';\r\n\r\n\r\nlet audioContext = null;\r\nlet osc = [];\r\nlet gain = [];\r\nlet wave2 = null;\r\n\r\nlet Filter = null;\r\nlet Delay = null;\r\nlet DelayGain = null;\r\nlet DelayFeedback = null;\r\nlet Distortion = null;\r\nlet MasterVol = null;\r\n\r\nlet DistortionOn = false;\r\n\r\nlet attackTime = 0.1;\r\nlet decayTime = 0.5;\r\n\r\nexport function initAudioContext() {\r\n    if (audioContext === null) {   \r\n        audioContext = new AudioContext();\r\n    }\r\n\r\n    Filter = audioContext.createBiquadFilter();\r\n    Filter.type = \"lowpass\";\r\n    filterCutoff(12000);\r\n    filterResonance(1);\r\n\r\n    Delay = audioContext.createDelay(5.0);\r\n    DelayFeedback = audioContext.createGain();\r\n    DelayGain = audioContext.createGain();\r\n    delayTime(0.3);\r\n    delayFeedback(0.5);\r\n    delayWet(0.5);\r\n\r\n    Distortion = audioContext.createWaveShaper();\r\n    drive(0);\r\n\r\n    MasterVol = audioContext.createGain();\r\n    masterVolume(0.5);\r\n\r\n    Distortion.connect(Filter);\r\n    Filter.connect(Delay);\r\n    Delay.connect(DelayGain);\r\n    DelayGain.connect(DelayFeedback);\r\n    DelayFeedback.connect(Delay);\r\n    DelayGain.connect(MasterVol);\r\n    Filter.connect(MasterVol);\r\n    \r\n    MasterVol.connect(audioContext.destination);\r\n}\r\n\r\nexport function updateBuffer(wave) {\r\n\r\n    if (wave.length > 0) {\r\n        const numPoints = wave.length;\r\n        const fft = new FFT(numPoints);\r\n    \r\n        const formatedPoints = fft.createComplexArray();\r\n        fft.toComplexArray(wave, formatedPoints);\r\n    \r\n        const out = fft.createComplexArray();\r\n        fft.transform(out, formatedPoints);\r\n        \r\n        const l = out.length/2\r\n\r\n        const real = new Float32Array(l);\r\n        const imag = new Float32Array(l);\r\n\r\n        for (let i = 0; i < l; i ++) {\r\n            real[i] = out[i*2];\r\n            imag[i] = out[i*2 + 1];\r\n        }\r\n        wave2 = audioContext.createPeriodicWave(real, imag);\r\n\r\n        for (let i = 0; i < 16; i ++) {\r\n            if(osc[i] != null){\r\n                osc[i].setPeriodicWave(wave2);\r\n            }\r\n        }\r\n        console.log(\"update\");\r\n    }\r\n}\r\n\r\n\r\nexport function playSoundWave(ch, pitch) {\r\n\r\n    osc[ch] = audioContext.createOscillator();\r\n    gain[ch] = audioContext.createGain();\r\n\r\n    osc[ch].setPeriodicWave(wave2);\r\n    \r\n\r\n    osc[ch].frequency.setValueAtTime(pitch, audioContext.currentTime);\r\n    \r\n    gain[ch].gain.setValueAtTime(0, audioContext.currentTime);\r\n    gain[ch].gain.linearRampToValueAtTime(0.5, audioContext.currentTime + attackTime);\r\n    gain[ch].gain.setTargetAtTime(0.5, audioContext.currentTime + attackTime, decayTime);\r\n\r\n    osc[ch].connect(gain[ch]);\r\n\r\n    if(DistortionOn){\r\n        gain[ch].connect(Distortion);\r\n    }\r\n    else{\r\n        gain[ch].connect(Filter);\r\n    }\r\n    \r\n    osc[ch].start();\r\n\r\n}\r\n\r\n\r\nexport function stopSoundWave(ch) {\r\n    if(osc[ch] != null){\r\n        gain[ch].gain.cancelScheduledValues(audioContext.currentTime);\r\n        gain[ch].gain.setValueAtTime(gain[ch].gain.value, audioContext.currentTime);\r\n        gain[ch].gain.linearRampToValueAtTime(0, audioContext.currentTime + decayTime);\r\n        osc[ch].stop(audioContext.currentTime + decayTime);\r\n        osc[ch] = null;\r\n    }\r\n}\r\n\r\nexport function attackTimeSet(value) {\r\n    value = Math.round(value * 100) / 100;\r\n    attackTime = value;\r\n}\r\n\r\nexport function decayTimeSet(value) {\r\n    value = Math.round(value * 100) / 100;\r\n    decayTime = value;\r\n}\r\n\r\nexport function pitchShift(ch, pitch) {\r\n    if(osc[ch] != null){\r\n        osc[ch].detune.setValueAtTime(pitch * 1200 * 2, audioContext.currentTime);\r\n    }\r\n}\r\n\r\nexport function volumeShift(ch, vol) {\r\n    if(osc[ch] != null){\r\n        // gain[ch].gain.setValueAtTime(vol / 127, audioContext.currentTime);\r\n        gain[ch].gain.linearRampToValueAtTime(vol / 127, audioContext.currentTime + attackTime);\r\n    }\r\n}\r\n\r\nexport function delayTime(time){\r\n    Delay.delayTime.setValueAtTime(time, audioContext.currentTime);\r\n}\r\n\r\nfunction delayFeedback(value){\r\n    DelayFeedback.gain.setValueAtTime(value, audioContext.currentTime);\r\n}\r\n\r\nexport function delayWet(value){\r\n    DelayGain.gain.setValueAtTime(value, audioContext.currentTime);\r\n}\r\n\r\nexport function filterCutoff(value){\r\n    Filter.frequency.value = value;\r\n}\r\n\r\nexport function filterResonance(value){\r\n    Filter.Q.value = value;\r\n}\r\n\r\nexport function masterVolume(value){\r\n    MasterVol.gain.setValueAtTime(value, audioContext.currentTime);\r\n}\r\n\r\n// async function createReverb() {\r\n//     let convolver = audioContext.createConvolver();\r\n  \r\n//     // load impulse response from file\r\n//     let response = await fetch(\"js/irRoom.wav\");\r\n//     let arraybuffer = await response.arrayBuffer();\r\n//     convolver.buffer = await audioContext.decodeAudioData(arraybuffer);\r\n  \r\n//     return convolver;\r\n// }\r\n\r\nexport function drive(amount) {\r\n    amount = Math.round(amount);\r\n    if(amount < 1){\r\n        DistortionOn = false;\r\n    }\r\n    else{\r\n        Distortion.curve = makeDistortionCurve(amount);\r\n        DistortionOn = true;\r\n    }\r\n    \r\n}\r\n\r\nfunction makeDistortionCurve(amount) {\r\n    \r\n    const k = typeof amount === \"number\" ? amount : 50;\r\n    const n_samples = 256;\r\n    const curve = new Float32Array(n_samples);\r\n    const deg = Math.PI / 180;\r\n  \r\n    for (let i = 0; i < n_samples; i++) {\r\n      const x = (i * 2) / n_samples - 1;\r\n      curve[i] = ((3 + k) * x * 20 * deg) / (Math.PI + k * Math.abs(x));\r\n    }\r\n    return curve;\r\n}\r\n","export function easeInOut(t, amt=2) {\r\n    let tPow = Math.pow(t, amt);\r\n    return tPow / (tPow + Math.pow(1 - t, amt));\r\n}\r\n\r\nexport function sinEaseInOut(t) {\r\n    return 0.5 - 0.5 * Math.cos(Math.PI * t);\r\n}\r\n\r\nexport function smallEaseInOut(t, a, b) {\r\n    // maximum slope, during the constant part\r\n    let m = 1 / (1 - a - b);\r\n\r\n    // f0\r\n    if (t < a) {\r\n        return 0;\r\n    }\r\n\r\n    // f1\r\n    if (t < b) {\r\n        return ((m / 2) / (b - a)) * (t - a) * (t - a);\r\n    }\r\n\r\n    // f2\r\n    if (t < 1 - b) {\r\n        return m * (t - b) + // constant line part\r\n        (m / 2) * (b - a); // maximum value of f1\r\n    }\r\n\r\n    // use symmetry powers\r\n    return 1 - smallEaseInOut(1 - t, a, b)\r\n}\r\n\r\nexport function slurp(val1, val2, amt) {\r\n    return (val2 - val1) * amt + val1;\r\n}\r\n\r\nexport function experp(val1, val2, amt) {\r\n    return Math.exp(\r\n        slurp(\r\n            Math.log(val1),\r\n            Math.log(val2),\r\n            amt\r\n        )\r\n    )\r\n}\r\n\r\nexport function clampedSlurp(val1, val2, amt) {\r\n    if (amt < 0) {\r\n        return val1;\r\n    }\r\n    if (amt > 1) {\r\n        return val2;\r\n    }\r\n    return slurp(val1, val2, amt);\r\n}\r\n\r\nexport function clamp(amt, val1, val2) {\r\n    if (amt < val1) {\r\n        return val1;\r\n    }\r\n    if (amt > val2) {\r\n        return val2;\r\n    }\r\n    return amt;\r\n}\r\n\r\n/**\r\n * Extracts a 0-1 interval from a section of a 0-1 interval\r\n *\r\n * For example, if min == 0.3 and max == 0.7, you get:\r\n *\r\n *           0.3  0.7\r\n *     t: 0 --+----+-- 1\r\n *           /      \\\r\n *          /        \\\r\n *         /          \\\r\n *     -> 0 ---------- 1\r\n *\r\n * Useful for making sub animations.\r\n *\r\n * Doesn't do any clamping, so you might want to clamp yourself.\r\n */\r\nexport function divideInterval(t, min, max) {\r\n    return (t - min) / (max - min);\r\n}\r\n\r\n/**\r\n * Does a positive modulo\r\n * @param {number} a The thing being modulo'd\r\n * @param {number} b The divider thing\r\n * @returns {number} a % b\r\n */\r\nexport function posMod(a, b) {\r\n    let out = a % b;\r\n    if (out < 0) {\r\n        out += b;\r\n    }\r\n    return out;\r\n}\r\n\r\n// TODO? Redesign so this generates a function?\r\nexport function to2dIsometric(x, y, z, xzAngle=0, yAngle=0) {\r\n    const mul = matrixMultiplication()(3);\r\n    // s/o to wikipedia for these rotation matrices\r\n    const xzRotateMatrix = [\r\n        Math.cos(xzAngle), 0, -Math.sin(xzAngle),\r\n        0, 1, 0,\r\n        Math.sin(xzAngle), 0, Math.cos(xzAngle)\r\n    ];\r\n    const yRotateMatrix = [\r\n        1, 0, 0,\r\n        0, Math.cos(yAngle), Math.sin(yAngle),\r\n        0, -Math.sin(yAngle), Math.cos(yAngle)\r\n    ];\r\n    const transformMatrix = mul(yRotateMatrix, xzRotateMatrix);\r\n\r\n    const transformed = mul(transformMatrix, [x, y, z]);\r\n    // Just return the x and y\r\n    return {x: transformed[0], y: transformed[1]};\r\n}","import { slurp } from \"./util.js\";\r\n\r\n// Generates a wave from a function in the range [0, 1)\r\nexport function getWave(fn, numSamples = 128) {\r\n    let points = [];\r\n    for (let i = 0; i < numSamples; i ++) {\r\n        const amt = i / numSamples;\r\n        points.push(fn(amt));\r\n    }\r\n    return points;\r\n}\r\n\r\n/**\r\n * @param {Array<number>} wave\r\n * @returns {Array<number>} Normalised wave (in the range -1 to 1)\r\n */\r\nexport function normaliseWave(wave) {\r\n    const min = Math.min(...wave);\r\n    const max = Math.max(...wave);\r\n    return wave.map(sample => slurp(-1, 1, (sample - min) / (max - min)));\r\n}\r\n\r\n/**\r\n * Creates a function that gives the value of a wave at a certain point. Does some interpolation.\r\n * @param {Array<number>} wave\r\n * @returns {function(number):number} A wave function (mainly to be used by the playSoundWave thing)\r\n */\r\nexport function getWaveFunction(wave) {\r\n    return t => {\r\n        t %= 1;\r\n        if (t < 0) {\r\n            t ++;\r\n        }\r\n        const index = Math.floor(wave.length * t);\r\n        const nextIndex = (index + 1) % wave.length;\r\n        // The remainder from doing the divide\r\n        const extra = (wave.length * t) % 1;\r\n\r\n        return slurp(wave[index], wave[nextIndex], extra);\r\n    }\r\n}\r\n\r\n\r\nexport function squareWave(t) {\r\n    // Do ya own normalising ya dangus\r\n    return t < 0.5 ? -1 : 1\r\n}\r\n\r\nexport function renderWave({context, wave, width, yPosition=0, yMultiple, startXAmt=0, type='wave'}) {\r\n    let startI = 0;\r\n    // (I think the wavelength of the wave can be configured by changing the 1 here)\r\n    const step = 1 / wave.length;\r\n    // TODO: Skip drawing the start things that are already defined.\r\n    for (let xAmt = startXAmt, i = startI; xAmt <= 1 + step; xAmt += step, i ++) {\r\n        const index = i % wave.length;\r\n\r\n        const x = width * xAmt;\r\n        const y = yPosition + yMultiple * wave[index];\r\n\r\n        if (type == 'wave') {\r\n            if (i == 0) {\r\n                context.moveTo(x, y);\r\n            }\r\n            else {\r\n                context.lineTo(x, y);\r\n            }\r\n        }\r\n        else if (type == 'samples') {\r\n            context.beginPath();\r\n            context.arc(x, y, 2, 0, 2 * Math.PI);\r\n            context.fill();\r\n        }\r\n    }\r\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// import DrawController from './controller/draw-controller.js';\r\n// import EpicyclesController from './controller/epicycles-controller.js';\r\n// import ComplexSinusoidController from './controller/complex-sinusoid-controller.js';\r\n// import { titlePoints } from './points/title-points.js';\r\n// import WaveController from './controller/wave-controller.js';\r\n// import SkewedSinusoidController from './controller/skewed-sinusoid-controller.js';\r\n// import { peaceHandPoints } from './points/peace-hand-points.js';\r\n// import SkewedPathController from './controller/skewed-path-controller.js';\r\n// import { mePoints } from './points/me-points.js';\r\n// import ImageSwapController from './controller/image-swap-controller.js';\r\n// import { loopLikeAJpeg } from './jpeg.js';\r\n// import ImageBuildUpController from './controller/image-build-up-controller.js';\r\n// // import JpegCompressorController from './controller/jpeg-compressor-controller.js';\r\n// import HeadingController from './controller/heading-controller.js';\r\n// import WaveFrequenciesController from './controller/wave-frequencies-controller.js';\r\n// import SelfDrawController from './controller/self-draw/self-draw-controller.js';\r\n// import ImageMultController from './controller/image-mult-controller.js';\r\n// import { getScrollPosition } from './controller/controller-util.js';\r\n// import WaveSamplesController from './controller/wave-samples-controller.js';\r\n// import { getWave, squareWave } from './wave-things.js';\r\n\r\nimport Conductor from './conductor.js';\r\nimport WaveSplitController from './controller/wave-split-controller.js';\r\nimport WaveDrawController from './controller/wave-draw-controller.js';\r\nimport RangeController from './controller/range-controller.js';\r\nimport { stopSoundWave, playSoundWave, updateBuffer, initAudioContext, delayTime, delayWet\r\n, filterCutoff, filterResonance, drive, masterVolume, attackTimeSet, decayTimeSet } from './synth.js';\r\n\r\nimport { connectMidi, nPiontsCC, cutoffCC, resonanceCC, delayTimeCC, delayWetCC,\r\n         attackCC, decayCC, driveCC, masterVolCC } from './midi.js';\r\nlet conductor = null;\r\n\r\nfunction init() {\r\n\r\n    let controllers = [];\r\n\r\n    let waveDrawController, waveDrawSliderController, waveDrawButton, waveDrawSplitController;\r\n    if (hasElement('wave-draw')) {\r\n        waveDrawController = new WaveDrawController('wave-draw');\r\n        controllers.push(waveDrawController);\r\n    }\r\n    if (hasElement('wave-draw-instruction')) {\r\n        const instruction = document.getElementById('wave-draw-instruction');\r\n        if (waveDrawController) {\r\n            waveDrawController.onDrawingStart.push(() => instruction.classList.add('hidden'))\r\n        }\r\n    }\r\n    if (hasElement('wave-draw-slider')) {\r\n        waveDrawSliderController = new RangeController('wave-draw-slider');\r\n        waveDrawSliderController.animate = false;\r\n        controllers.push(waveDrawSliderController);\r\n    }\r\n    if (hasElement('wave-draw-split')) {\r\n        waveDrawSplitController = new WaveSplitController('wave-draw-split');\r\n        if (waveDrawController != null) {\r\n            waveDrawController.onDrawingStart.push(() => {\r\n                waveDrawSplitController.splitAnim = true;\r\n                waveDrawSplitController.setPath([]);\r\n                updateBuffer(waveDrawSplitController.partialWave);\r\n            });\r\n            waveDrawController.onDrawingEnd.push(() => {\r\n                waveDrawSplitController.splitAnim = true;\r\n                waveDrawSplitController.setPath(waveDrawController.normPath);\r\n                updateBuffer(waveDrawSplitController.partialWave);\r\n            });\r\n            // Reset the slider back to 1 when the wave changes to draw the full wave.\r\n            if (waveDrawSliderController) {\r\n                waveDrawController.onDrawingStart.push(() => {\r\n                    waveDrawSliderController.slider.value = 1;\r\n                    waveDrawSplitController.fourierAmt = 1;\r\n                });\r\n                waveDrawController.onDrawingEnd.push(() =>\r\n                {\r\n                    waveDrawSliderController.slider.value = 1;\r\n                    waveDrawSplitController.fourierAmt = 1;\r\n                });\r\n            }\r\n        }\r\n        if (waveDrawSliderController != null) {\r\n            nPiontsCC.push(val => {\r\n                waveDrawSplitController.fourierAmt = val;\r\n                waveDrawSplitController.splitAnim = false;\r\n                waveDrawSliderController.slider.value = val;\r\n                updateBuffer(waveDrawSplitController.partialWave);\r\n            });\r\n            waveDrawSliderController.onValueChange.push(val => {\r\n                waveDrawSplitController.fourierAmt = val;\r\n                waveDrawSplitController.splitAnim = false;\r\n                updateBuffer(waveDrawSplitController.partialWave);\r\n            });\r\n        }\r\n        controllers.push(waveDrawSplitController);\r\n    }\r\n    if (hasElement('wave-draw-button')) {\r\n        const button = document.getElementById('wave-draw-button');\r\n        if (button) {\r\n            button.addEventListener('mousedown', () => playSoundWave(0, 260));\r\n            button.addEventListener('mouseout', () => stopSoundWave(0));\r\n            button.addEventListener('mouseup', () => stopSoundWave(0));\r\n        }\r\n    }\r\n\r\n    if (hasElement('cutoff-slider')) {\r\n        let cutoffSliderController = new RangeController('cutoff-slider');\r\n        cutoffSliderController.animate = false;\r\n        cutoffSliderController.onValueChange.push(val => {\r\n            filterCutoff(val);\r\n        });\r\n        cutoffCC.push(val => {\r\n            cutoffSliderController.slider.value = val;\r\n            filterCutoff(val);\r\n        });\r\n        controllers.push(cutoffSliderController);\r\n    }\r\n\r\n    if (hasElement('resonance-slider')) {\r\n        let resonanceSliderController = new RangeController('resonance-slider');\r\n        resonanceSliderController.animate = false;\r\n        resonanceSliderController.onValueChange.push(val => {\r\n            filterResonance(val);\r\n        });\r\n        resonanceCC.push(val => {\r\n            resonanceSliderController.slider.value = val;\r\n            filterResonance(val);\r\n        });\r\n        controllers.push(resonanceSliderController);\r\n    }\r\n\r\n    if (hasElement('delay-time-slider')) {\r\n        let delayTimeSliderController = new RangeController('delay-time-slider');\r\n        delayTimeSliderController.animate = false;     \r\n        delayTimeSliderController.onValueChange.push(val => {\r\n            delayTime(val);\r\n        });\r\n        delayTimeCC.push(val => {\r\n            delayTimeSliderController.slider.value = val;\r\n            delayTime(val);\r\n        });\r\n        controllers.push(delayTimeSliderController);\r\n    }\r\n\r\n    if (hasElement('delay-wet-slider')) {\r\n        let delayWetSliderController = new RangeController('delay-wet-slider'); \r\n        delayWetSliderController.animate = false;\r\n        delayWetSliderController.onValueChange.push(val => {\r\n            delayWet(val);\r\n        });\r\n        delayWetCC.push(val => {\r\n            delayWetSliderController.slider.value = val;\r\n            delayWet(val);\r\n        });\r\n        controllers.push(delayWetSliderController);\r\n    }\r\n\r\n    if (hasElement('attack-slider')) {\r\n        let attackSliderController = new RangeController('attack-slider');\r\n        attackSliderController.animate = false;\r\n        attackSliderController.onValueChange.push(val => {\r\n            attackTimeSet(val);\r\n        });\r\n        attackCC.push(val => {\r\n            attackSliderController.slider.value = val;\r\n            attackTimeSet(val);\r\n        });\r\n        controllers.push(attackSliderController);\r\n    }\r\n\r\n    if (hasElement('decay-slider')) {\r\n        let decaySliderController = new RangeController('decay-slider');\r\n        decaySliderController.animate = false;\r\n        decaySliderController.onValueChange.push(val => {\r\n            decayTimeSet(val);\r\n        });\r\n        decayCC.push(val => {\r\n            decaySliderController.slider.value = val;\r\n            decayTimeSet(val);\r\n        });\r\n        controllers.push(decaySliderController);\r\n    }\r\n\r\n    if (hasElement('drive-slider')) {\r\n        let driveSliderController = new RangeController('drive-slider');\r\n        driveSliderController.animate = false;\r\n        driveSliderController.onValueChange.push(val => {\r\n            drive(val);\r\n        });\r\n        driveCC.push(val => {\r\n            driveSliderController.slider.value = val;\r\n            drive(val);\r\n        });\r\n        controllers.push(driveSliderController);\r\n    }\r\n\r\n    if (hasElement('master-slider')) {\r\n        let masterSliderController = new RangeController('master-slider');\r\n        masterSliderController.animate = false;\r\n        masterSliderController.onValueChange.push(val => {\r\n            masterVolume(val);\r\n        });\r\n        masterVolCC.push(val => {\r\n            masterSliderController.slider.value = val;\r\n            masterVolume(val);\r\n        });\r\n        controllers.push(masterSliderController);\r\n    }\r\n    \r\n\r\n    initAudioContext();\r\n    connectMidi();\r\n\r\n    conductor = new Conductor(controllers);\r\n    conductor.start();\r\n    // To let me play around with things in the console.\r\n    window.conductor = conductor;\r\n}\r\n\r\nfunction hasElement(id) {\r\n    return document.getElementById(id) != null;\r\n}\r\n\r\n// /**\r\n//  * Configure the canvases to be able to handle screens with higher dpi.\r\n//  *\r\n//  * We can only call this once because after that, the width has changed!\r\n//  */\r\n// function updateCanvasSizes() {\r\n//     const pixelRatio = window.devicePixelRatio || 1;\r\n//     const canvases = document.getElementsByTagName(\"canvas\");\r\n//     for (let canvas of canvases) {\r\n//         const width = canvas.width;\r\n//         const height = canvas.height;\r\n//         canvas.width = width * pixelRatio;\r\n//         canvas.height = height * pixelRatio;\r\n//         canvas.style.width = width + 'px';\r\n//         canvas.style.height = height + 'px';\r\n//     }\r\n// }\r\n\r\n// updateCanvasSizes();\r\ninit();"],"names":["clamp","rgb","r","g","b","grey","whiteAmt","whiteRgb","Math","floor","palette","black","blue","cyan","pink","orange","Conductor","constructor","controllers","lastTime","Date","now","mousePosition","slice","updatingControllers","document","addEventListener","evt","updateMousePosition","updateTouchPosition","window","onResize","start","requestAnimationFrame","everyFrame","forEach","controller","update","render","curTime","dt","isOnScreen","push","debug","getElementById","innerHTML","map","c","id","join","x","clientX","y","clientY","touches","length","elementInView","getScrollPosition","Controller","CanvasController","width","height","canvas","context","getContext","clear","resetTransform","clearRect","elem","boundingRect","getBoundingClientRect","centerY","top","bottom","windowHeight","innerHeight","documentElement","clientHeight","right","left","innerWidth","clientWidth","easeInOut","RangeController","slider","onValueChange","holdValueCount","holdValueLength","heldValue","resumeCount","resumeLength","animate","animAmt","period","oninput","holdValue","resumeAmt","easedResumeAmt","sinePos","cos","PI","value","fn","acos","slurp","WaveDrawController","wavePoints","Array","fill","drawing","onDrawingStart","onDrawingEnd","lastMousePoint","startDrawing","stopDrawing","preventDefault","passive","normPath","el","canvasPosition","actualWidth","scale","mousePoint","xDiff","abs","pointsGap","lerpPoints","ceil","i","amt","index","getNearestIndex","xAmt","pos","round","renderWave","beginPath","lineWidth","strokeStyle","moveTo","lineTo","stroke","getRealFourierData","transitionFactor","WaveSplitController","partialWave","fourierPoints","onFourierChange","waveTop","waveBottom","totalHeight","fadeFrequencies","splitAnim","fourierAmt","setPath","path","pathAverage","reduce","a","p","fourierData","filter","f","amplitude","sort","min","max","splitAmt","desiredSplitAmt","renderWaves","numBabies","sizeMultiple","spacingMultiplier","curWavePos","startXAmt","fadeAmt","renderedBabies","babe","babeAmt","waveData","wavePosition","wave","iAmt","fullWaveAmt","sineAmt","freq","phase","globalAlpha","yPosition","yMultiple","size","Error","_csize","table","angle","sin","power","t","_width","_bitrev","j","shift","revShift","_out","_data","_inv","fromComplexArray","complex","storage","res","createComplexArray","toComplexArray","input","completeSpectrum","spectrum","half","transform","out","data","_transform4","realTransform","_realTransform4","inverseTransform","step","len","outOff","bitrev","off","_singleTransform2","_singleTransform4","inv","quarterLen","limit","k","A","B","C","D","Ar","Ai","Br","Bi","Cr","Ci","Dr","Di","MAr","MAi","tableBr","tableBi","MBr","MBi","tableCr","tableCi","MCr","MCi","tableDr","tableDi","MDr","MDi","T0r","T0i","T1r","T1i","T2r","T2i","T3r","T3i","FAr","FAi","FCr","FCi","FBr","FBi","FDr","FDi","evenR","evenI","oddR","oddI","leftR","leftI","rightR","rightI","step2","step3","_singleRealTransform2","_singleRealTransform4","halfLen","hquarterLen","ST0r","ST0i","ST1r","ST1i","ST2r","ST2i","ST3r","ST3i","SFAr","SFAi","SFBr","SFBi","SA","SB","FFT","getFourierData","points","numPoints","fft","fftData","sqrt","atan2","formatedPoints","resample2dData","numSamples","newPoints","position","nextIndex","getFourierRI","console","log","playSoundWave","stopSoundWave","pitchShift","volumeShift","nPiontsCC","cutoffCC","resonanceCC","delayTimeCC","delayWetCC","attackCC","decayCC","driveCC","masterVolCC","connectMidi","navigator","requestMIDIAccess","then","midi","midiReady","err","event","initDevices","target","midiIn","midiOut","inputs","values","next","done","outputs","output","midiMessageReceived","NOTE_ON","NOTE_OFF","PITCH_BEND","AFTER_TOUCH","CONTROL_CHANGE","velocity","cmd","channel","srcElement","name","note2Frequency","bend","pow","note","normaliseWave","getWaveFunction","audioContext","osc","gain","wave2","Filter","Delay","DelayGain","DelayFeedback","Distortion","MasterVol","DistortionOn","attackTime","decayTime","initAudioContext","AudioContext","createBiquadFilter","type","filterCutoff","filterResonance","createDelay","createGain","delayTime","delayFeedback","delayWet","createWaveShaper","drive","masterVolume","connect","destination","updateBuffer","l","real","Float32Array","imag","createPeriodicWave","setPeriodicWave","ch","pitch","createOscillator","frequency","setValueAtTime","currentTime","linearRampToValueAtTime","setTargetAtTime","cancelScheduledValues","stop","attackTimeSet","decayTimeSet","detune","vol","time","Q","amount","curve","makeDistortionCurve","n_samples","deg","tPow","sinEaseInOut","smallEaseInOut","m","val1","val2","experp","exp","clampedSlurp","divideInterval","posMod","to2dIsometric","z","xzAngle","yAngle","mul","matrixMultiplication","xzRotateMatrix","yRotateMatrix","transformMatrix","transformed","getWave","sample","extra","squareWave","startI","arc","conductor","init","waveDrawController","waveDrawSliderController","waveDrawButton","waveDrawSplitController","hasElement","instruction","classList","add","val","button","cutoffSliderController","resonanceSliderController","delayTimeSliderController","delayWetSliderController","attackSliderController","decaySliderController","driveSliderController","masterSliderController"],"sourceRoot":""}